# Tanner-Whitehouse 3

✨ [논문 링크](https://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8660640) ✨
-----
### Abstract
```
딥러닝 기술은 최근 몇 년간 빠르게 발전하였으며, 
골 연령 평가(BAA)는 딥러닝의 이점을 얻을 수 있는 전형적인 객체감지 및 분류 문제이다.
Tanner-Whitehouse 3 기법은 소아 및 청소년의 뼈 성숙도를 평가하는 데 널리 사용되는 기술이며,
이를 자동화하여 정확성과 효율성 향상 및 임상 결과를 개선 가능하게 할 수 있다.

* TW3 기법: 13개의 다른 뼈에서 뼈의 양 끝인 골단과 관절주의의 성장 영역을 지역화하여 해당 뼈의 골 연령을 추정하는 방법
```
### Index Trems
Bone age assessment(BAA), deep learning, GP, TW3

-----
<br>

## Introduction

### 1) TW 골연령 추정 방식
1.	관심 영역(ROI)을 구성된 손과 손목의 특정한 뼈의 성숙도를 평가
2.	사전 정의된 골격 성숙도 점수는 성숙도 수준에 따라 개별 ROI에 할당
3.	2.의 점수를 합산하여 총 성숙도 점수를 계산
4.	마지막으로 성숙도 점수와 BAs 간의 상관 행렬을 사용하여 BA로 변환
<br>

### 2) TW3 방식 요약, 장점 및 단점
```
• 현재 TW3는 노뼈(Radius), 자뼈(ulna) 및 단골(RUS)을 ROI로 분석
• 골 연령 평가에 딥러닝 방식을 적용할 경우, 입력된 값(환자의 왼손과 손목 X-선 이미지)에 해당하는 클래스(예: BA에 해당하는 클래스)가 예측
• 합성곱 신경망(CNN)과 그 변형이 BAA 자동화에 점점 더 많이 사용되고 있으며, 유망한 결과를 보임
```

<img src="https://user-images.githubusercontent.com/115753833/228771900-46598d56-7f5b-4a86-85bd-f618430b5e40.png" width="500">

🔸 **장점**: <br>
- 상관 행렬이 0.1년 단위로 구성되기 때문에 더 정확하고 재현성이 높음

🔸 **단점**: <br>
- 왼손과 손목의 X-선 이미지 내의 모든 ROI를 정확하게 위치시키는 것이 쉽지 않음<br>
  : 단일 ROI의 성장 영역에 대한 정확한 위치 정보를 획득하지 못하면 평가 정확도가 저하
  
- 대규모 레이블 트레이닝 데이터셋을 구성하기 어려움<br>
  : 개별 ROI의 성숙도와 BA에 대한 방사선과학자 판독에는 상당한 시간과 비용이 필요
<br>

## TW3 적용방식
![image](https://user-images.githubusercontent.com/115753833/228784839-52e699be-cadc-44d1-90ab-08f34e035fcd.png)
-----
<br>

### 1) 경계 ROI(bROI) 사용
```
TW3 방법에서 사용되는 실제 ROI를 포함하여 손목, 엄지, 중지, 새끼손가락의 충분히 넓은 영역을 추출
```
<img src="https://user-images.githubusercontent.com/115753833/228784506-dfe99781-f1ad-403f-aba2-7c50f08b6137.png" width="400">

- 손목의 bROI: 노뼈(radius), 자뼈(ulna).
- 엄지의 bROI: 엄지의 첫마디뼈, 끝마디뼈, 손목과 손가락 사이의 중수골
- 중지의 bROI: 중지의 첫마디뼈, 중간마디뼈, 끝마디뼈, 손목과 손가락 사이의 중수골 
- 소지의 bROI: 소지의 첫마디뼈, 중간마디뼈, 끝마디뼈, 손목과 손가락 사이의 중수골
<br>

### 2) bROI에서 13개의 실제 ROI를 추출
### 3) 개별 ROI의 골격 성숙도 수준을 분류하고 이를 점수로 변환
### 4) 골 연령 예측
<br>

-----
<br>

## 논문의 CNN 구성 방식
### STEP 1. bROIs추출(X-ray이미지 추출방식)
**1. 원본 이미지의 손목을 수직으로 회전**

<img src="https://user-images.githubusercontent.com/115753833/228792650-1960587d-6394-4cf6-bfe3-9b142f69326f.png" width="700">

```
(1) 그레이 스케일 이미지로 변환 / 이진화
(2) 손의 윤곽을 추출
(3) 각 행의 흰색 픽셀 좌표가 저장
(4) 회귀 분석: 픽셀 포인트를 사용하여 손목의 중간점을 계산한 다음 이 포인트에 근접한 직선을 계산
(5) 직선의 기울기를 계산하고 이미지를 회전
```

**2. 손목과 손가락에 따라 다른 알고리즘이 적용**
<img src="https://user-images.githubusercontent.com/115753833/228793728-1f8f2fea-285a-4983-baf9-b008a79ea276.png" width="700">
<br>

### STEP 2. bROIs에서 실제 ROI를 추출(CNN적용)
Faster R-CNN사용

첫 번째 컨볼루션:  입력 이미지의 특징 맵을 추출 → 9개의 앵커 박스 결정
ROI 풀링: 고정 크기 특징 벡터를 추출
완전 연결 계층
두 개의 완전 연결 레이어: 최종 영역의 크기와 위치, 예측 점수 결정

